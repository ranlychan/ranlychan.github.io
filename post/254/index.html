
<!DOCTYPE html>
<html>
  <head>
    
<meta charset="utf-8" >

<title>ç‰©è”ç½‘é¡¹ç›® | LeanCloud+æ ‘è“æ´¾+å®‰å“å®ç°ä½å®…ç¯å¢ƒå¼‚å¸¸å‘Šè­¦ç³»ç»Ÿ | è“é‡Œå°çª | ranlychan&#39;s blog</title>
<meta name="description" content="ç¬”è€•ä¸è¾ï¼Œæ±‡æ¶“æˆæ²³ã€‚">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://ranlychan.github.io/favicon.ico?v=1735555799576">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://ranlychan.github.io/styles/main.css">



<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/highlight.min.js"></script>



  </head>
  <body>
    <div id="app" class="main">
      <div class="site-header-container">
  <div class="site-header">
    <div class="left">
      <a href="https://ranlychan.github.io">
        <img class="avatar" src="https://ranlychan.github.io/images/avatar.png?v=1735555799576" alt="" width="32px" height="32px">
      </a>
      <a href="https://ranlychan.github.io">
        <h1 class="site-title">è“é‡Œå°çª | ranlychan&#39;s blog</h1>
      </a>
    </div>
    <div class="right">
      <transition name="fade">
        <i class="icon" :class="{ 'icon-close-outline': menuVisible, 'icon-menu-outline': !menuVisible }" @click="menuVisible = !menuVisible"></i>
      </transition>
    </div>
  </div>
</div>

<transition name="fade">
  <div class="menu-container" style="display: none;" v-show="menuVisible">
    <div class="menu-list">
      
        
          <a href="/" class="menu purple-link">
            é¦–é¡µ
          </a>
        
      
        
          <a href="/archives" class="menu purple-link">
            å½’æ¡£
          </a>
        
      
        
          <a href="/tags" class="menu purple-link">
            æ ‡ç­¾
          </a>
        
      
        
          <a href="/post/about" class="menu purple-link">
            å…³äº
          </a>
        
      
    </div>
  </div>
</transition>


      <div class="content-container">
        <div class="post-detail">
          
          <h2 class="post-title">ç‰©è”ç½‘é¡¹ç›® | LeanCloud+æ ‘è“æ´¾+å®‰å“å®ç°ä½å®…ç¯å¢ƒå¼‚å¸¸å‘Šè­¦ç³»ç»Ÿ</h2>
          <div class="post-info post-detail-info">
            <span><i class="icon-calendar-outline"></i> 2021-07-06</span>
            
              <span>
                <i class="icon-pricetags-outline"></i>
                
                  <a href="https://ranlychan.github.io/tag/CRuobGcuyyO/">
                    Typecho
                    
                  </a>
                
              </span>
            
          </div>
          <div class="post-content" v-pre>
            <h2 id="å‰è¨€">å‰è¨€</h2>
<p>æœ¬ç³»ç»Ÿç›‘æµ‹çš„æ¡ä»¶é™äºæ¸©æ¹¿åº¦ã€ç«ç„°ã€çƒŸé›¾æˆ–æœ‰æ¯’æ°”ä½“ï¼Œ<s>ä»¥åŠç™»è®°æˆæƒäººå‘˜äººè„¸ä¿¡æ¯ï¼Œï¼ˆäººè„¸æ£€æµ‹å’Œè¯†åˆ«è€æ—©å†™äº†ï¼Œæ‡’å¾—å†æ¥å…¥äº†æœ‰æ—¶é—´å†è¯´å§ï¼‰</s> ğŸ˜å‡ºç°å¼‚å¸¸æ—¶å¯åŠæ—¶è®°å½•å’Œå‘ç”¨æˆ·APPæ¨é€æ¶ˆæ¯å‘Šè­¦ã€‚<br>
<img src="https://ranlychan.top/usr/uploads/2021/07/350204538.jpg" alt="å®Œæˆåçš„æ ‘è“æ´¾å’Œä¼ æ„Ÿå™¨" loading="lazy"></p>
<!--more-->
<h2 id="ç›®å½•">ç›®å½•</h2>
<!--index-menu-->
<h2 id="ç‰©æ–™æ¸…å•">ç‰©æ–™æ¸…å•</h2>
<table>
<thead>
<tr>
<th>é…ä»¶åç§°</th>
<th>æ•°é‡</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td>Raspberry Pi 4B</td>
<td>1</td>
<td>ä¸»æœº</td>
</tr>
<tr>
<td>é—ªè¿ªMicro SD 16GB</td>
<td>1</td>
<td>ä¸ºæ ‘è“æ´¾çƒ§å½•ç³»ç»Ÿ</td>
</tr>
<tr>
<td>æ ‘è“æ´¾ä¸“ç”¨ç”µæºé€‚é…å™¨åŠç”µæºçº¿</td>
<td>1</td>
<td>ä¸ºæ ‘è“æ´¾ä¾›ç”µ</td>
</tr>
<tr>
<td>å®‰å“æ‰‹æœº</td>
<td>1</td>
<td>æ§åˆ¶å’ŒæŸ¥çœ‹ç³»ç»Ÿè¿è¡Œæƒ…å†µ</td>
</tr>
<tr>
<td>MQ-2çƒŸé›¾ä¼ æ„Ÿå™¨</td>
<td>1</td>
<td>æ£€æµ‹ç‡ƒçƒ§äº§ç”ŸçƒŸé›¾åŠæœ‰å®³æ°”ä½“</td>
</tr>
<tr>
<td>ç«ç„°ä¼ æ„Ÿå™¨</td>
<td>1</td>
<td>æ£€æµ‹ä¸€å®šçº¿æ€§èŒƒå›´çš„ç«ç„°</td>
</tr>
<tr>
<td>DHT11æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨</td>
<td>1</td>
<td>æ£€æµ‹å®¤å†…æ¸©åº¦å’Œç›¸å¯¹æ¹¿åº¦</td>
</tr>
<tr>
<td>æœé‚¦çº¿</td>
<td>9</td>
<td>è¿æ¥ä¼ æ„Ÿå™¨å’Œæ ‘è“æ´¾ç”µè„‘</td>
</tr>
</tbody>
</table>
<h2 id="è½¯ä»¶æ¶æ„">è½¯ä»¶æ¶æ„</h2>
<h3 id="å®¤å†…ç¯å¢ƒæ¡ä»¶ç›‘æ§æ¨¡å—">å®¤å†…ç¯å¢ƒæ¡ä»¶ç›‘æ§æ¨¡å—</h3>
<p>ç³»ç»ŸåŒæ—¶ä½¿ç”¨å¤šä¸ªä¼ æ„Ÿå™¨æ„ŸçŸ¥å’Œä¸Šä¼ æ‰€å¤„ç¯å¢ƒçš„æ¸©æ¹¿åº¦ã€çƒŸé›¾å’Œç«ç„°è§¦å‘æ•°æ®ï¼Œ<strong>åŒæ—¶ä½¿ç”¨çƒŸé›¾ä¼ æ„Ÿå™¨ã€æ¸©åº¦ä¼ æ„Ÿå™¨å’Œç«ç„°ä¼ æ„Ÿå™¨è¿›è¡Œåˆ¤æ–­ç«æƒ…</strong>ã€‚</p>
<ul>
<li>è‹¥åªæœ‰çƒŸé›¾ä¼ æ„Ÿå™¨æˆ–ç«ç„°ä¼ æ„Ÿå™¨è¢«è§¦å‘æˆ–æ¸©åº¦é«˜äº45.0æ‘„æ°åº¦ï¼Œå‘ç”¨æˆ·å‘é€æ™®é€šå‘Šè­¦ï¼›</li>
<li>å…¶ä¸­ä¸¤ä¸ªæ¡ä»¶æ»¡è¶³ï¼Œå‘ç”¨æˆ·å‘é€ä¸­çº§å‘Šè­¦ï¼›</li>
<li>è‹¥ä¸‰è€…å‡æ»¡è¶³ï¼Œå‘ç”¨æˆ·å‘é€ç´§æ€¥å‘Šè­¦ä¿¡æ¯ã€‚</li>
</ul>
<p>æ¨é€æ¶ˆæ¯è¢«ç”¨æˆ·ç‚¹å‡»åï¼Œä¼šè·³è½¬åˆ°APPä¸»ç•Œé¢è®©ç”¨æˆ·æŸ¥çœ‹è¯¦ç»†ä¼ æ„Ÿå™¨æ•°æ®ã€‚</p>
<h3 id="æ‰‹æœºç›‘è§†appæ¨¡å—">æ‰‹æœºç›‘è§†APPæ¨¡å—</h3>
<p>æ¥å—æ¶ˆæ¯æ¨é€å’ŒæŸ¥çœ‹ä¼ æ„Ÿå™¨ä¸Šä¼ çš„æ•°æ®ã€‚</p>
<h2 id="ç¡¬ä»¶æ¨¡å—ä½¿ç”¨">ç¡¬ä»¶æ¨¡å—ä½¿ç”¨</h2>
<h3 id="dht11æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨">DHT11æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨</h3>
<p>1.è¿æ¥VCCï¼ŒGNDï¼Œå…¶ä¸­DATAæ¥åˆ°GPIO 4ï¼Œæ ‘è“æ´¾4Bå¼•è„šå¦‚å›¾ï¼š<br>
<img src="https://ranlychan.top/usr/uploads/2021/07/854720491.png" alt="æ ‘è“æ´¾4Bå¼•è„šå›¾ï¼Œç”±æ ‘è“æ´¾å®éªŒå®¤ç»˜åˆ¶" loading="lazy"><br>
2.å®‰è£…pythonä¾èµ–Adafruit_DHTã€‚<br>
åœ¨æ§åˆ¶å°ä¸­è¾“å…¥å‘½ä»¤<code>pip install Adafruit_Python_DHT</code>è¿›è¡Œå®‰è£…ã€‚å®‰è£…æˆåŠŸåï¼Œç¼–å†™æµ‹è¯•ç¨‹åºï¼š</p>
<pre><code class="language-python">import time
import sys
import Adafruit_DHT
DHT_chanel = 18 #BCMç¼–ç å¼•è„šå£
while true
	time.sleep(1)
	hum,temp = Adafruit_DHT.read_retry(11,DHT_chanel)
</code></pre>
<p>3.è¿è¡Œæ­£å¸¸ï¼Œç»“æœå¦‚å›¾ï¼š(ä»¥humidityè¡¨ç¤ºç›¸å¯¹æ¹¿åº¦)<br>
<img src="https://ranlychan.top/usr/uploads/2021/07/274080997.png" alt="åœ¨æ ‘è“æ´¾ä¸Šæµ‹è¯•DHT11æ­£å¸¸è¾“å‡ºæ¸©æ¹¿åº¦å€¼" loading="lazy"></p>
<h3 id="mq-2çƒŸé›¾ä¼ æ„Ÿå™¨">MQ-2çƒŸé›¾ä¼ æ„Ÿå™¨</h3>
<p>1.è¿æ¥VCCï¼ŒGNDï¼Œå…¶ä¸­DOä¸ºTTLé«˜ä½ç”µå¹³è¾“å‡ºå£ï¼Œæ¥GPIO 0<br>
2.å®‰è£…pythonä¾èµ–PRi.GPIOã€‚åœ¨æ§åˆ¶å°ä¸­è¾“å…¥å‘½ä»¤<code>pip install PRi.GPIO</code>è¿›è¡Œå®‰è£…ã€‚<br>
3.ç¼–å†™æµ‹è¯•ç¨‹åºå¦‚ä¸‹ï¼Œé«˜ç”µå¹³æ—¶æ­£å¸¸ï¼š</p>
<pre><code class="language-python">import RPi.GPIO as GPIO 
import time

CHANNEL=7 # GPIOå¼•è„šå£
GPIO.setmode(GPIO.BOARD) 
GPIO.setup(CHANNEL,GPIO.IN,pull_up_down=GPIO.PUD_DOWN)

try:
    while True: # æ‰§è¡Œä¸€ä¸ªwhileæ­»å¾ªç¯
        status=GPIO.input(CHANNEL) # æ£€æµ‹7å·å¼•è„šå£çš„è¾“å…¥é«˜ä½ç”µå¹³çŠ¶æ€
        print(status) # å®æ—¶æ‰“å°æ­¤æ—¶çš„ç”µå¹³çŠ¶æ€
        if status == True: # å¦‚æœä¸ºé«˜ç”µå¹³ï¼Œè¯´æ˜MQ-2æ­£å¸¸ï¼Œå¹¶æ‰“å°â€œOKâ€
            print ( ' OK ' )
        else:    # å¦‚æœä¸ºä½ç”µå¹³ï¼Œè¯´æ˜MQ-2æ£€æµ‹åˆ°æœ‰å®³æ°”ä½“ï¼Œå¹¶æ‰“å°â€œdangerousâ€
            print ( ' high toxic gas level ! ! ! ' )
        time.sleep(5) 
except KeyboardInterrupt: # å¼‚å¸¸å¤„ç†ï¼Œå½“æ£€æµ‹æŒ‰ä¸‹é”®ç›˜çš„Ctrl+Cï¼Œå°±ä¼šé€€å‡ºè¿™ä¸ª&gt;è„šæœ¬
GPIO.cleanup()

</code></pre>
<p>4.è¿è¡Œæ­£å¸¸ï¼Œç»“æœå¦‚å›¾ï¼š<br>
<img src="https://ranlychan.top/usr/uploads/2021/07/3509455972.png" alt="MQ-2æ­£å¸¸å·¥ä½œï¼ŒTTLå£è¾“å‡ºé«˜ç”µå¹³è¡¨ç¤ºæ­£å¸¸" loading="lazy"></p>
<h2 id="äº‘åç«¯æ¥å…¥ä¸ä½¿ç”¨">äº‘åç«¯æ¥å…¥ä¸ä½¿ç”¨</h2>
<p><strong>äº‘åç«¯çš„ä½œç”¨å°±æ˜¯å……å½“æ‰‹æœºAPPå’Œç‰©è”ç½‘ç¡¬ä»¶ä¹‹é—´çš„æ¡¥æ¢</strong>ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„æ ‘è“æ´¾å’Œå®‰å“APPä¹‹é—´ç”¨äºæ¨é€æ¶ˆæ¯ä»¥åŠä¿å­˜ä¼ æ„Ÿå™¨æ•°æ®çš„ä¸­é—´äººã€‚ç»è¿‡ä¸Šä¸€è½®çš„æµ‹è¯•ï¼Œ<code>Bmobäº‘åç«¯</code>è™½ç„¶æä¾›äº†æ¯”è¾ƒå®Œå–„çš„å…è´¹äº‘åç«¯æœåŠ¡ï¼Œä½†åœ¨Android SDKæ¥å…¥æ—¶æœ‰éš¾ä»¥è§£å†³çš„é”™è¯¯ï¼Œæ•…é‡‡ç”¨åŒæ ·å…·æœ‰æ•°æ®æœåŠ¡å’Œæ¶ˆæ¯æ¨é€çš„å…è´¹äº‘åç«¯æœåŠ¡<code>LeanCloud</code>ã€‚</p>
<h3 id="ä¸ºå®‰å“ç”¨æˆ·ç«¯æ¥å…¥leancloudæ•°æ®åŠæ¶ˆæ¯æ¨é€sdk">ä¸ºå®‰å“ç”¨æˆ·ç«¯æ¥å…¥LeanCloudæ•°æ®åŠæ¶ˆæ¯æ¨é€SDK</h3>
<p>æŒ‰ç…§å®˜æ–¹æ–‡æ¡£ä¸­å¯¹äºJava SDKçš„è¯´æ˜ï¼Œåœ¨Android Studioä¸­ä½¿ç”¨Gradleå¼•å…¥LeanCloudçš„æ•°æ®å­˜å‚¨å’Œæ¶ˆæ¯æ¨é€çš„Java SDKï¼Œå³åœ¨moduleçº§Gradleé…ç½®æ–‡ä»¶çš„ç›¸åº”ä½ç½®ä¸­åŠ å…¥å¦‚ä¸‹å¼•å…¥ï¼š</p>
<pre><code class="language-xml">implementation 'cn.leancloud:storage-android:8.0.1'
implementation 'cn.leancloud:realtime-android:8.0.1'
implementation 'io.reactivex.rxjava2:rxandroid:2.1.1'
</code></pre>
<p>ç„¶åå†è¿›è¡ŒGradleé¡¹ç›®åŒæ­¥å³å¯ã€‚</p>
<h4 id="leancloudå®‰å“sdkåˆå§‹åŒ–">LeanCloudå®‰å“SDKåˆå§‹åŒ–</h4>
<p>åœ¨Androidé¡¹ç›®çš„Applicationç±»çš„onCreate()æ–¹æ³•å†…è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š</p>
<pre><code class="language-java">public class MyLeanCloudApp extends Application {
    @Override
    public void onCreate() {
        super.onCreate();
        // æä¾› thisã€App IDã€App Keyã€Server Host ä½œä¸ºå‚æ•°
        // æ³¨æ„è¿™é‡Œåƒä¸‡ä¸è¦è°ƒç”¨ cn.leancloud.core.LeanCloud çš„ initialize æ–¹æ³•ï¼Œå¦åˆ™ä¼šå‡ºç° NetworkOnMainThread ç­‰é”™è¯¯ã€‚
        LeanCloud.initialize(this,
 &quot;t8dmUAOAX4NptIX4oziNpYPc-gzGzoHsz&quot;,
 &quot;pDuJ1si51y5RGGdWyqReM8Ff&quot;,
 &quot;https://please-replace-with-your-customized.domain.com&quot;);//è¿™é‡Œå¡«å…¥LeanCloudä¸Šæä¾›æˆ–æ˜¯è‡ªå·±ç»‘å®šçš„åŸŸåï¼Œæœ¬é¡¹ç›®ä½¿ç”¨å®˜æ–¹æä¾›çš„å…è´¹åŸŸå
PushService.setDefaultChannelId(this, &quot;android&quot;);#é…ç½®é»˜è®¤æ¶ˆæ¯é€šé“
#è®¢é˜…æ¶ˆæ¯é€šé“
PushService.subscribe(this, &quot;public&quot;, MainActivity.class); 
        PushService.subscribe(this, &quot;android&quot;, MainActivity.class);
		#ä½¿ç”¨SharePreferenceså­˜å‚¨å®‰è£…ä¿¡æ¯ï¼Œæ˜¯å¦ä¸ºç¬¬ä¸€æ¬¡å®‰è£…ä»¥åŠå®‰è£…å¾—åˆ°çš„installationId
        SharedPreferences sp = getSharedPreferences(&quot;installation&quot;, MODE_PRIVATE);
        SharedPreferences.Editor edit = sp.edit();
        boolean isInstalled = sp.getBoolean(&quot;isInstalled&quot;, false);
        if(!isInstalled){
            //LCInstallation.getCurrentInstallation().saveInBackground();
            LCInstallation.getCurrentInstallation().saveInBackground().subscribe(new Observer&lt;LCObject&gt;() {
                @Override
                public void onSubscribe(Disposable d) {
                }
                @Override
                public void onNext(LCObject avObject) {
                    // å…³è” installationId åˆ°ç”¨æˆ·è¡¨ç­‰æ“ä½œã€‚
                    String installationId = LCInstallation.getCurrentInstallation().getInstallationId();
                    edit.putString(&quot;installationId&quot;,installationId).commit();
                    System.out.println(&quot;ä¿å­˜æˆåŠŸï¼š&quot; + installationId );
                }
                @Override
                public void onError(Throwable e) {
                    System.out.println(&quot;ä¿å­˜å¤±è´¥ï¼Œé”™è¯¯ä¿¡æ¯ï¼š&quot; + e.getMessage());
                }
                @Override
                public void onComplete() {
                }
            });
            edit.putBoolean(&quot;isInstalled&quot;, true);
            edit.commit();
    }
}

</code></pre>
<p>å®Œæˆååœ¨AndroidManifest.xmlå£°æ˜æ­¤Applicationç±»ï¼Œå³åœ¨å…¶ä¸­çš„&lt;applicationä¸‹æ·»åŠ </p>
<p><code>android:name=&quot;.MyLeanCloudApp&quot; &gt;</code></p>
<p>è¿™é‡Œçš„MyLeanCloudAppæ›¿æ¢æˆè‡ªå·±çš„Applicationç±»åç§°ã€‚</p>
<h4 id="leancloudå®‰å“æ¶ˆæ¯æ¨é€æœåŠ¡åˆå§‹åŒ–">LeanCloudå®‰å“æ¶ˆæ¯æ¨é€æœåŠ¡åˆå§‹åŒ–</h4>
<p>æŒ‰ç…§å®˜æ–¹æ–‡æ¡£ï¼Œåœ¨Androidé¡¹ç›®çš„AndroidManifest.xmlçš„&lt;applicationä¸‹æ·»åŠ å¦‚ä¸‹æœåŠ¡å’Œæ¶ˆæ¯æ¥æ”¶å™¨:</p>
<pre><code class="language-xml">&lt;service android:name=&quot;cn.leancloud.push.PushService&quot; /&gt;
        &lt;!--
        &lt;receiver android:name=&quot;cn.leancloud.push.LCBroadcastReceiver&quot;&gt;
            &lt;intent-filter&gt;
                &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot; /&gt;
                &lt;action android:name=&quot;android.intent.action.USER_PRESENT&quot; /&gt;
                &lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot; /&gt;
            &lt;/intent-filter&gt;
        &lt;/receiver&gt;
        --&gt;
        &lt;receiver
            android:name=&quot;.MyCustomReceiver&quot;
            android:exported=&quot;false&quot;&gt;
            &lt;intent-filter&gt;
                &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot; /&gt;
                &lt;action android:name=&quot;android.intent.action.USER_PRESENT&quot; /&gt;
                &lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot; /&gt;
                &lt;action android:name=&quot;com.avos.UPDATE_STATUS&quot; /&gt;
            &lt;/intent-filter&gt;
        &lt;/receiver&gt;

</code></pre>
<p>å…¶ä¸­<code>MyCustomReceiver</code>æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰ç±»ï¼Œç»§æ‰¿<code>BroadcastReceiver</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="language-java">public class MyCustomReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        // è·å–æ¨é€æ¶ˆæ¯æ•°æ®
        String message = intent.getStringExtra(&quot;com.avoscloud.Data&quot;);
        String channel = intent.getStringExtra(&quot;com.avoscloud.Channel&quot;);
        System.out.println(&quot;push message&quot;);
        System.out.println(&quot;message=&quot; + message + &quot;, channel=&quot; + channel);
    }
}

</code></pre>
<h4 id="leancloudå®‰å“æ¶ˆæ¯æ¨é€æœåŠ¡æ¥å…¥å®Œæˆæµ‹è¯•">LeanCloudå®‰å“æ¶ˆæ¯æ¨é€æœåŠ¡æ¥å…¥å®Œæˆæµ‹è¯•</h4>
<p>åœ¨LeanCloudçš„åå°-æ¨é€-åœ¨çº¿å‘é€ä¸­ï¼Œå¡«å†™JSONæ¨é€å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="language-JSON">{
	&quot;alert&quot;: &quot;test content&quot;,
	&quot;title&quot;: &quot;WARNINGï¼ Your house's condition is in danger!&quot;,
	&quot;silent&quot;: false
}
</code></pre>
<p>ç‚¹å‡»å‘é€ï¼ŒAndroidç«¯æˆåŠŸæ¥åˆ°æ¨é€æ¶ˆæ¯ï¼š<br>
<img src="https://ranlychan.top/usr/uploads/2021/07/2824347528.png" alt="Androidç«¯æˆåŠŸæ¥åˆ°LeanCloudç®¡ç†åå°æ¨é€çš„æ¶ˆæ¯" loading="lazy"><br>
ä½†æˆ‘ä»¬è¦æ±‚çš„æ˜¯ç”±æ ‘è“æ´¾æ¥ä¸»åŠ¨è§¦å‘æ¶ˆæ¯æ¨é€ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥ä¸ºæ ‘è“æ´¾é…ç½®SDKã€‚</p>
<h3 id="ä¸ºç”¨æˆ·ç«¯ç›‘æµ‹ç¡¬ä»¶-æ ‘è“æ´¾æ¥å…¥leancloud-python-sdk">ä¸ºç”¨æˆ·ç«¯ç›‘æµ‹ç¡¬ä»¶ â€”â€” æ ‘è“æ´¾æ¥å…¥LeanCloud Python SDK</h3>
<p>æŒ‰ç…§LeanCloudçš„å®˜æ–¹æ–‡æ¡£ï¼Œä½¿ç”¨åŒ…ä¾èµ–ç®¡ç†å·¥å…·è¿›è¡Œä¾¿æ·çš„å®‰è£…ï¼Œå³ï¼Œåœ¨æ§åˆ¶å°ä¸­è¾“å…¥sudo pip install leancloudè¿›è¡Œä¾èµ–åŒ…å®‰è£…ã€‚</p>
<p>ä¾èµ–åŒ…å®‰è£…å®Œæˆï¼Œåœ¨éœ€è¦ä½¿ç”¨åˆ°LeanCloudæœåŠ¡çš„ç¨‹åºé‡Œå…ˆä½¿ç”¨import leancloudå¯¼å…¥ï¼Œå†ä½¿ç”¨å‘½ä»¤leancloud.init(&quot;App ID &quot;, &quot; App Key &quot;)åˆå§‹åŒ–LeanCloudæœåŠ¡ã€‚</p>
<p>æŒ‰ç…§LeanCloudæ–‡æ¡£ï¼Œä½¿ç”¨Pythonåœ¨æ–°å¢ç»“æ„åŒ–æ•°æ®çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="language-python"># æ„å»ºæ•°æ®æ“ä½œå¯¹è±¡
    StateObject = leancloud.Object.extend('State')# 'State'ä¸ºè¡¨å
    state_object = StateObject()
    state_object.set('temperature', temp)# 'temperature' ä¸ºåˆ—å
    state_object.set('relativeHumidity', hum)# 'relativeHumidity'ä¸ºåˆ—å
    state_object.set('isFireOK', isFireOK)# 'isFireOK'ä¸ºåˆ—å
    state_object.set('isSmokeOK', isMQ2OK)# 'isSmokeOK'ä¸ºåˆ—å
    state_object.set('recordDate', recordDate)# 'recordDate'ä¸ºåˆ—å
state_object.save()#ä¼ å…¥çš„å„åˆ—æ•°æ®ç±»å‹éœ€è¦ä¸€ä¸€å¯¹åº”ï¼Œå‚ç…§å®˜æ–¹æ–‡æ¡£çš„æ•°æ®ç±»å‹

# æµ‹è¯•å‘Androidç«¯æ¨é€æ¶ˆæ¯
content=&quot;temperature lower than 45.0, itâ€™s just a test&quot;
title=&quot;nothing&quot;
data = json.loads(json.dumps({'alert': content, 'title': title}))
if(len(title)!=0 and len(content)!=0):
	leancloud.push.sned(data,
					  channels=['android','public'],
                      push_time=None,
                      expiration_time=None,
                      expiration_interval=None,
                      where=None,cql=None,
                      flow_control=None,
                      prod=None)
</code></pre>
<p>åœ¨å®‰å“ç«¯SDKå’Œæ¶ˆæ¯æ¨é€æœåŠ¡é…ç½®æ­£å¸¸ä»¥åï¼Œå¯ä»¥æ­£å¸¸æ”¶åˆ°å¦‚ä¸‹æ¨é€ï¼š<br>
<img src="https://ranlychan.top/usr/uploads/2021/07/2329614395.png" alt="åœ¨å®‰å“å®æœºä¸Šæ”¶åˆ°çš„æ¥è‡ªæ ‘è“æ´¾çš„æ¨é€æ¶ˆæ¯" loading="lazy"></p>
<h2 id="ä¼ æ„Ÿå™¨æ•°æ®å®ä½“">ä¼ æ„Ÿå™¨æ•°æ®å®ä½“</h2>
<p>ä¼ æ„Ÿå™¨è®°å½•æ•°æ®åœ¨äº‘åç«¯æ•°æ®åº“ä¸­çš„å®ä½“å¦‚è¡¨æ‰€ç¤ºï¼š</p>
<p><code>Stateè¡¨</code></p>
<table>
<thead>
<tr>
<th>åˆ—å</th>
<th>æ•°æ®ç±»å‹</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>recordDate</td>
<td>DATE</td>
<td>æ•°æ®é‡‡é›†æ—¶é—´</td>
</tr>
<tr>
<td>temperature</td>
<td>NUMBER</td>
<td>æ¸©åº¦ä¼ æ„Ÿå™¨æ•°æ®</td>
</tr>
<tr>
<td>relativeHumidity</td>
<td>NUMBER</td>
<td>ç›¸å¯¹æ¹¿åº¦ä¼ æ„Ÿå™¨æ•°æ®</td>
</tr>
<tr>
<td>isFireOK</td>
<td>BOOLEN</td>
<td>ç«ç„°ä¼ æ„Ÿå™¨æ•°æ®æ˜¯å¦è¶…é˜ˆå€¼</td>
</tr>
<tr>
<td>isSmokeOK</td>
<td>BOOLEN</td>
<td>çƒŸé›¾ä¼ æ„Ÿå™¨æ•°æ®æ˜¯å¦è¶…é˜ˆå€¼</td>
</tr>
<tr>
<td>IsException</td>
<td>BOOLEN</td>
<td>æ˜¯å¦æœ‰ä»»ä¸€æ•°æ®è¶…è¿‡é˜ˆå€¼</td>
</tr>
</tbody>
</table>
<h2 id="android-appç¼–å†™å’Œæ‰“åŒ…æµ‹è¯•">Android APPç¼–å†™å’Œæ‰“åŒ…æµ‹è¯•</h2>
<h3 id="androidé¡¹ç›®å’Œé›†æˆå¼€å‘ç¯å¢ƒ">Androidé¡¹ç›®å’Œé›†æˆå¼€å‘ç¯å¢ƒ</h3>
<p>æœ¬é¡¹ç›®ä½¿ç”¨åŸºäºintellJ IDEAç¤¾åŒºç‰ˆçš„Android Studioè¿›è¡Œå¼€å‘æµ‹è¯•ï¼Œæ–°å»ºAndroidé¡¹ç›®å¹¶è¿›è¡Œç›¸åº”é…ç½®ï¼Œä½¿ç”¨Redmi Note 8 Pro å®ä½“æœºè¿›è¡Œæµ‹è¯•ã€‚</p>
<h3 id="appè¯¦ç»†è®¾è®¡">Appè¯¦ç»†è®¾è®¡</h3>
<p>ä¸ºäº†å‡å°‘é¡¹ç›®å¤æ‚åº¦ï¼Œæœ¬é¡¹ç›®é‡‡ç”¨æœ€ç®€å•çš„å®‰å“å¼€å‘æ¨¡å¼ï¼š<code>MVC</code>ã€‚ä¸€ä¸ª<code>MainActivity</code>å’Œå¯¹åº”ç•Œé¢å³å¯ã€‚</p>
<p>Appæ‰“å¼€åè‡ªåŠ¨è¿›å…¥åˆ°ä¸»ç•Œé¢MainActivityï¼Œå¹¶å¼‚æ­¥åŠ è½½æœåŠ¡å™¨è®°å½•çš„ä¼ æ„Ÿå™¨æ•°æ®ã€‚æ•°æ®çš„å±•ç¤ºé‡‡ç”¨<code>RecyclerView + BaseRecyclerViewadapter</code>çš„æ¨¡å¼ã€‚åœ¨MainActivityçš„<code>layout</code>ä¸­ï¼Œä½¿ç”¨<code>SwipeRefreshLayout</code>åŒ…è£¹RecyclerViewä»¥å®ç°ä¸‹æ‹‰åŠ è½½çš„åŠŸèƒ½ã€‚</p>
<p>åœ¨MainActivityä¸­ä¸ºSwipeRefreshLayoutæ·»åŠ ä¸‹æ‹‰ç›‘å¬ï¼Œä¸‹æ‹‰åŠ¨ä½œå‘ç”Ÿæ—¶æ‰§è¡ŒæœåŠ¡å™¨æ•°æ®æ‹‰å–åŠ¨ä½œã€‚</p>
<p>ç‚¹å‡»å³ä¸Šè§’æ„Ÿå¹å·å›¾æ ‡å¯ä»¥ç­›é€‰æœ‰æ•°æ®è¶…è¿‡é˜ˆå€¼çš„è®°å½•ï¼Œå†æ¬¡ä¸‹æ‹‰åˆ·æ–°å¯ä»¥å–æ¶ˆç­›é€‰ã€‚å®Œæˆåæµ‹è¯•è·å¾—æœåŠ¡å™¨æ•°æ®å¦‚å›¾ï¼š<br>
<img src="https://ranlychan.top/usr/uploads/2021/07/1366463811.png" alt="APPä¸»é¡µå±•ç¤ºçš„ä¼ æ„Ÿå™¨æ•°æ®" loading="lazy"></p>
<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>
<p>[1]	PyPI. Adafruit_Python_DHT [EB/OL]. (2021-07-06). https://pypi.org/project/Adafruit_Python_DHT/<br>
[2]	åŸƒå‹’é‡Œç¬æ³¢æ´›. æ ‘è“æ´¾DHT22è¯»Adafruit_DHTæŠ¥é”™ can not import Beaglebone_Black_Driverçš„è§£å†³åŠæ³• [EB/OL]. (2020-09-09). https://blog.csdn.net/elleryer/article/details/108482087<br>
[3]	weixin_34112030. åŸºäºæ ‘è“æ´¾ï¼ˆRaspberry Piï¼‰å¹³å°çš„MQ-2çƒŸé›¾æŠ¥è­¦ç³»ç»Ÿå®ç°ï¼ˆä¸€ï¼‰ [EB/OL]. (2018-03-16). https://blog.csdn.net/weixin_34112030/article/details/92237494<br>
[4]	LeanCloud. LeanCloudæ–‡æ¡£ [EB/OL]. (2021-07-06). https://leancloud.cn/docs</p>

          </div>
        </div>

        
          <div class="next-post">
            <a class="purple-link" href="https://ranlychan.github.io/post/239/">
              <h3 class="post-title">
                ä¸‹ä¸€ç¯‡ï¼šç¾é£Ÿèœè°± | èåœç‰ç±³çŒªéª¨æ±¤åˆ¶ä½œæ”»ç•¥
              </h3>
            </a>
          </div>
          
      </div>

      

      <div class="site-footer">
  <div class="slogan">ç¬”è€•ä¸è¾ï¼Œæ±‡æ¶“æˆæ²³ã€‚</div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://ranlychan.github.io/atom.xml" target="_blank">RSS</a>
</div>


    </div>
    <script type="application/javascript">

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>




  </body>
</html>
